@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

/* CRITICAL: Zoom scaling - must be at top before any @layer */
@media (max-width: 1919px) {
  body {
    zoom: 0.75 !important;
    min-height: 133.33vh !important; /* Compensate for zoom */
    background-color: #171717 !important; /* neutral-900 */
  }

  html {
    overflow-y: auto !important;
    background-color: #171717 !important; /* neutral-900 */
  }
}

@media (min-width: 1920px) {
  body {
    zoom: 1 !important;
    min-height: 100vh !important;
    background-color: #171717 !important; /* neutral-900 */
  }

  html {
    background-color: #171717 !important; /* neutral-900 */
  }
}

@theme inline {
  /* ============================================
     SIMVEX Design System - Verified Tokens
     Based on: docs/phase3-design-system.md
     ============================================ */

  /* === PRIMARY COLORS === */
  --color-primary: #02eee1;
  --color-primary-hover: #01a9a0;
  --color-primary-press: #01645f;
  --color-primary-light: #33f2e6;
  --color-primary-dark: #015b56;

  /* === NEUTRAL COLORS === */
  --color-neutral-50: #fafafa;
  --color-neutral-100: #f5f5f5;
  --color-neutral-200: #e5e5e5;
  --color-neutral-300: #d4d4d4;
  --color-neutral-400: #a3a3a3;
  --color-neutral-500: #737373;
  --color-neutral-600: #525252;
  --color-neutral-700: #404040;
  --color-neutral-800: #262626;
  --color-neutral-900: #171717;
  --color-neutral-950: #0a0a0a;

  /* === SEMANTIC COLORS === */
  --color-error: #ff4d54;
  --color-success: #00c950;
  --color-warning: #ffa500;
  --color-info: #2b7fff;

  /* === BACKGROUND COLORS === */
  --color-background: #171717;
  --color-foreground: #fafafa;

  /* === GLASSMORPHISM / OPACITY VARIANTS === */
  --color-primary-10: rgba(2, 238, 225, 0.1);
  --color-primary-20: rgba(2, 238, 225, 0.2);
  --color-primary-30: rgba(2, 238, 225, 0.3);
  --color-hover-30: rgba(1, 169, 160, 0.3);
  --color-press-30: rgba(1, 100, 95, 0.3);
  --color-white-30: rgba(255, 255, 255, 0.3);
  --color-gray-30: rgba(212, 212, 212, 0.3);
  --color-dark-gray-30: rgba(115, 115, 115, 0.3);
  --color-glass-bg: rgba(255, 255, 255, 0.05);
  --color-formula-bg: rgba(1, 100, 95, 0.5);

  /* === TYPOGRAPHY === */
  --font-sans:
    "Pretendard Variable", -apple-system, BlinkMacSystemFont, system-ui,
    sans-serif;
  --font-mono:
    ui-monospace, "Cascadia Code", "Source Code Pro", Menlo, Consolas,
    "DejaVu Sans Mono", monospace;

  /* Font Sizes - Based on verified scale */
  --font-size-xs: 0.75rem; /* 12px */
  --font-size-sm: 0.875rem; /* 14px */
  --font-size-base: 1rem; /* 16px */
  --font-size-lg: 1.5rem; /* 24px */
  --font-size-xl: 2rem; /* 32px */
  --font-size-2xl: 2.5rem; /* 40px */
  --font-size-3xl: 3.25rem; /* 52px */
  --font-size-4xl: 6rem; /* 96px */

  /* Line Heights */
  --line-height-tight: 1.25; /* Headings */
  --line-height-normal: 1.5; /* Body */
  --line-height-relaxed: 1.75; /* Long-form */

  /* Font Weights */
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;
  --font-weight-extrabold: 800;

  /* === SPACING === */
  /* Based on 8px grid with 4px adjustments */
  --spacing-0: 0;
  --spacing-px: 1px;
  --spacing-0_5: 0.125rem; /* 2px */
  --spacing-1: 0.25rem; /* 4px */
  --spacing-2: 0.5rem; /* 8px */
  --spacing-3: 0.75rem; /* 12px */
  --spacing-4: 1rem; /* 16px */
  --spacing-5: 1.25rem; /* 20px */
  --spacing-6: 1.5rem; /* 24px */
  --spacing-8: 2rem; /* 32px */
  --spacing-10: 2.5rem; /* 40px */
  --spacing-12: 3rem; /* 48px */
  --spacing-16: 4rem; /* 64px */
  --spacing-20: 5rem; /* 80px */
  --spacing-40: 10rem; /* 160px */

  /* === BORDER RADIUS === */
  --radius-none: 0;
  --radius-sm: 0.25rem; /* 4px */
  --radius-DEFAULT: 0.5rem; /* 8px */
  --radius-md: 0.75rem; /* 12px */
  --radius-lg: 1rem; /* 16px */
  --radius-xl: 1.5rem; /* 24px */
  --radius-2xl: 2rem; /* 32px */
  --radius-full: 9999px;

  /* === BOX SHADOWS === */
  --shadow-sm: 0px 2px 4px rgba(0, 0, 0, 0.1);
  --shadow-md: 0px 4px 12px rgba(0, 0, 0, 0.15);
  --shadow-lg: 0px 8px 24px rgba(0, 0, 0, 0.2);
  --shadow-card-glow: 4px 4px 20px 0px rgba(2, 238, 225, 0.1);
  --shadow-primary-glow: 0px 0px 12px rgba(2, 238, 225, 0.4);
  --shadow-glow-sm: 0px 0px 12px rgba(2, 238, 225, 0.2);
  --shadow-glow-md: 0px 0px 20px rgba(2, 238, 225, 0.3);
  --shadow-glow-lg: 0px 0px 30px rgba(2, 238, 225, 0.1);
  --shadow-slider-thumb: 4px 4px 10px 2px rgba(0, 0, 0, 0.25);
  --shadow-track-inset: inset 0px 4px 4px 0px rgba(0, 0, 0, 0.25);

  /* === BORDER WIDTHS === */
  --border-DEFAULT: 1px;
  --border-2: 2px;
  --border-3: 3px;
  --border-5: 5px;

  /* === TRANSITIONS === */
  --transition-fast: 150ms;
  --transition-normal: 300ms;
  --transition-slow: 500ms;
  --ease-default: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.6, 1);

  /* === SHADCN/UI COMPATIBILITY === */
  /* Keep these for shadcn/ui components */
  --color-card: var(--color-neutral-900);
  --color-card-foreground: var(--color-neutral-50);
  --color-popover: var(--color-neutral-800);
  --color-popover-foreground: var(--color-neutral-50);
  --color-primary-foreground: var(--color-neutral-900);
  --color-secondary: var(--color-neutral-800);
  --color-secondary-foreground: var(--color-neutral-50);
  --color-muted: var(--color-neutral-800);
  --color-muted-foreground: var(--color-neutral-400);
  --color-accent: var(--color-neutral-800);
  --color-accent-foreground: var(--color-neutral-50);
  --color-destructive: var(--color-error);
  --color-destructive-foreground: var(--color-neutral-50);
  --color-border: var(--color-neutral-300);
  --color-input: var(--color-neutral-300);
  --color-ring: var(--color-primary);
}

@layer base {
  * {
    @apply border-border;
    outline-color: rgba(2, 238, 225, 0.5);
  }

  body {
    @apply bg-background text-foreground;
    font-family: var(--font-sans);
    font-size: var(--font-size-base);
    line-height: var(--line-height-normal);
  }

  /* Typography hierarchy */
  h1 {
    font-size: var(--font-size-3xl);
    font-weight: var(--font-weight-bold);
    line-height: var(--line-height-tight);
  }

  h2 {
    font-size: var(--font-size-2xl);
    font-weight: var(--font-weight-bold);
    line-height: var(--line-height-tight);
  }

  h3 {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-semibold);
    line-height: var(--line-height-tight);
  }

  h4 {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    line-height: var(--line-height-tight);
  }

  /* Pointer cursor for interactive elements */
  button,
  a,
  [role="button"],
  [role="tab"],
  [role="menuitem"],
  select,
  label[for],
  input[type="checkbox"],
  input[type="radio"],
  summary {
    cursor: pointer;
  }

  /* Scrollbar styling for dark theme */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: var(--color-neutral-900);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--color-neutral-700);
    border-radius: var(--radius-full);
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--color-neutral-600);
  }
}

/* Utility classes for common patterns */
@layer utilities {
  .text-primary-cyan {
    color: var(--color-primary);
  }

  .bg-primary-cyan {
    background-color: var(--color-primary);
  }

  .border-primary-cyan {
    border-color: var(--color-primary);
  }

  /* State backgrounds */
  .bg-state-default {
    background-color: var(--color-gray-30);
  }

  .bg-state-primary {
    background-color: var(--color-primary-30);
  }

  .bg-state-hover {
    background-color: var(--color-hover-30);
  }

  .bg-state-press {
    background-color: var(--color-press-30);
  }

  /* Glass effects */
  .glass-bg {
    background-color: var(--color-glass-bg);
    backdrop-filter: blur(10px);
  }

  .card-glow {
    box-shadow: var(--shadow-card-glow);
  }

  /* Typography utilities */
  .text-display {
    font-size: var(--font-size-4xl);
    font-weight: var(--font-weight-extrabold);
    line-height: 1.17;
  }

  .text-heading-2xl {
    font-size: var(--font-size-3xl);
    font-weight: var(--font-weight-bold);
    line-height: var(--line-height-tight);
  }

  .text-heading-xl {
    font-size: var(--font-size-2xl);
    font-weight: var(--font-weight-bold);
    line-height: var(--line-height-tight);
  }

  .text-heading-lg {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-semibold);
    line-height: var(--line-height-tight);
  }

  .text-body-lg {
    font-size: var(--font-size-base);
    line-height: var(--line-height-normal);
  }

  .text-body-md {
    font-size: var(--font-size-sm);
    line-height: var(--line-height-normal);
  }

  .text-body-sm {
    font-size: var(--font-size-xs);
    line-height: 1.33;
  }
}

/* KaTeX math - Figma formula block (node-337:1339) */
.markdown-renderer .katex-display {
  margin: 0;
  padding: 16px;
  background: var(--color-formula-bg);
  border: 2px solid var(--color-primary);
  border-radius: 16px;
  text-align: center;
}

.markdown-renderer .katex-display > .katex {
  color: var(--color-neutral-50);
  font-size: 14px;
}

.markdown-renderer .katex-inline .katex {
  color: var(--color-neutral-50);
  font-size: 14px;
}
